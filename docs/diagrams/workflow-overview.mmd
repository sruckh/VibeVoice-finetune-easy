%% VibeVoice Fine-tuning Workflow Overview
%% Date: 2026-02-03

flowchart TB
    subgraph Input["üìÅ Input Data"]
        A1["Audio Files<br/>(.wav, .mp3, .flac)"]
        A2["Transcripts<br/>(optional)"]
    end
    
    subgraph Step1["1Ô∏è‚É£ Setup"]
        B1["Install Dependencies"]
        B2["Download Models"]
        B3["Create Virtual Env"]
    end
    
    subgraph Step2["2Ô∏è‚É£ Prepare Dataset"]
        C1["Scan Audio Files"]
        C2["Auto-Transcribe<br/>(Whisper)"]
        C3["Generate JSONL"]
        C4["Train/Val Split"]
    end
    
    subgraph Step3["3Ô∏è‚É£ Train Model"]
        D1["Load VibeVoice<br/>(1.5B or 7B)"]
        D2["Apply LoRA Adapters"]
        D3["Dual Loss Training<br/>(CE + Diffusion)"]
        D4["Save Checkpoints"]
    end
    
    subgraph Output["üì¶ Output"]
        E1["Fine-tuned LoRA<br/>Adapter"]
        E2["Model Checkpoints"]
    end
    
    A1 --> Step1
    A2 -.-> Step2
    
    B1 --> B2 --> B3 --> Step2
    
    C1 --> C2 --> C3 --> C4 --> Step3
    
    D1 --> D2 --> D3 --> D4 --> Output
    
    style Input fill:#e1f5fe
    style Step1 fill:#fff3e0
    style Step2 fill:#e8f5e9
    style Step3 fill:#fce4ec
    style Output fill:#f3e5f5
